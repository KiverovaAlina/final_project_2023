DROP TABLE IF EXISTS symptom;
CREATE TABLE symptom (
    symptom_id INTEGER PRIMARY KEY AUTOINCREMENT,
    symptom VARCHAR(30)
);
INSERT INTO symptom (symptom) VALUES
('Боль в горле'),
('Размытое зрение'),
('Головная боль'),
('Напряжение в глазах'),
('Зуд кожи'),
('Шелушение кожи'),
('Кашель'),
('Повышенная температура тела'),
('Нет симптомов');

DROP TABLE IF EXISTS doctor;

CREATE TABLE doctor (
       doctor_id INTEGER PRIMARY KEY AUTOINCREMENT,
    	speciality VARCHAR(50)
);

INSERT INTO doctor (speciality) VALUES
('Терапевт'),
('Отоларинголог'),
('Офтальмолог'),
('Дерматолог'),
('Пульмонолог'),
('Кардиолог');

DROP TABLE IF EXISTS diagnosis;

CREATE TABLE diagnosis (
       diagnosis_id INTEGER PRIMARY KEY AUTOINCREMENT,
	   diagnosis VARCHAR(30)
);

INSERT INTO diagnosis (diagnosis) VALUES
('Фарингит'),
('Астигматизм'),
('Дерматит'),
('Миопия'),
('Пневмония'),
('Бронхит'),
('Гипертензия'),
('Ларингит');

DROP TABLE IF EXISTS type;

CREATE TABLE type (
       type_id INTEGER PRIMARY KEY AUTOINCREMENT,
	   type VARCHAR(30)
);

INSERT INTO type (type) VALUES
('Первичный прием'),
('Вторичный прием'),
('Закрыто');



DROP TABLE IF EXISTS patient;

CREATE TABLE patient (
	patient_id INTEGER PRIMARY KEY AUTOINCREMENT,
	patient_name VARCHAR(50),
	gender VARCHAR(50),
    	snils VARCHAR(14),
    	date_birth DATE,
    	address VARCHAR(100)
);

INSERT INTO patient (patient_name, gender, snils, date_birth, address)  VALUES 
('Кулаков А.Л.', 'м','111-111-111 01','1978-03-21','Ленина ул., д. 22 кв.76'),
('Фомичёв Б.С.', 'м','111-111-111 02','1966-11-24','Хуторская ул., д. 8 кв.1'),
('Калашников Я.Г.', 'м','111-111-111 03','1974-03-01','Радужная ул., д. 23 кв.1'),
('Бобылёв Л.Б.', 'м','111-111-111 04','1967-06-15','Юбилейная ул., д. 22 кв.95'),
('Николаев Н.Я.', 'м','111-111-111 05','1961-04-02','Заречный пер., д. 18 кв.214'),
('Гаврилов Г.В.', 'м','111-111-111 06','1967-12-05','Дружбы ул., д. 1 кв.122'),
('Калашников М.Г.', 'м','111-111-111 07','1979-01-25','Советский пер., д. 6 кв.51'),
('Корнилов И.О.', 'м','111-111-111 09','1976-07-20','Минская ул., д. 17 кв.13');


DROP TABLE IF EXISTS appointment;

CREATE TABLE appointment (
      	appointment_id INTEGER PRIMARY KEY AUTOINCREMENT,
            type_id INT,
	diagnosis_id INT,
      doctor_id INT,
      FOREIGN KEY (type_id)  REFERENCES type (type_id ) ON DELETE CASCADE,
	FOREIGN KEY (diagnosis_id)  REFERENCES diagnosis (diagnosis_id ) ON DELETE CASCADE,
	FOREIGN KEY (doctor_id)  REFERENCES doctor (doctor_id) ON DELETE CASCADE
);

INSERT INTO appointment (diagnosis_id, doctor_id, type_id)  VALUES
(1, 1, 1),
(1, 2, 1),
(2, 3, 1),
(3, 4, 1),
(4, 3, 1),
(5, 5, 1),
(6, 5, 1),
(6, 1, 1),
(7, 6, 1),
(8, 2, 1),
(1, 1, 2),
(1, 2, 2),
(2, 3, 2),
(3, 4, 2),
(4, 3, 2),
(5, 5, 2),
(6, 5, 2),
(6, 1, 2),
(7, 6, 2),
(8, 2, 2),
(1, 1, 3),
(1, 2, 3),
(2, 3, 3),
(3, 4, 3),
(4, 3, 3),
(5, 5, 3),
(6, 5, 3),
(6, 1, 3),
(7, 6, 3),
(8, 2, 3);

DROP TABLE IF EXISTS app_symptom;

CREATE TABLE app_symptom (
      app_symptom_id INTEGER PRIMARY KEY AUTOINCREMENT, 
      appointment_id INT, 
      symptom_id INT,
      FOREIGN KEY (appointment_id)  REFERENCES appointment (appointment_id) ON DELETE CASCADE,
      FOREIGN KEY (symptom_id)  REFERENCES symptom (symptom_id) ON DELETE CASCADE
);

INSERT INTO app_symptom (appointment_id, symptom_id)  VALUES
(1, 1),
(1, 7),
(2, 1),
(2, 7),
(2, 8),
(3, 2),
(4, 4),
(4, 5),
(5, 2),
(5, 4),
(6, 7),
(6, 8),
(7, 1),
(7, 7),
(7, 8),
(8, 1),
(8, 7),
(8, 8),
(9, 3),
(10, 1),
(11, 1),
(12, 1),
(13, 2),
(14, 4),
(15, 2),
(16, 7),
(17, 1),
(18, 1),
(19, 3),
(20, 1),
(21, 9),
(22, 9),
(23, 9),
(24,9),
(25,9),
(26,9),
(27,9),
(28,9),
(29,9),
(30,9);

DROP TABLE IF EXISTS app_patient;
CREATE TABLE app_patient (
      app_patient_id INTEGER PRIMARY KEY AUTOINCREMENT, 
      appointment_id int, 
      patient_id INT,
      date DATE,
      FOREIGN KEY (appointment_id)  REFERENCES appointment (appointment_id) ON DELETE CASCADE,
      FOREIGN KEY (patient_id)  REFERENCES patient (patient_id) ON DELETE CASCADE
      
);

INSERT INTO app_patient (appointment_id, patient_id, date) VALUES
(5, 1, '2022-02-01'),
(15, 1, '2022-02-15'),
(25, 1, '2022-04-15'),
(1, 1, '2022-02-10'),
(21, 1, '2022-02-24'),
(3, 2, '2022-03-09'),
(13, 2,  '2022-09-09'),
(4, 3, '2022-03-01'),
(14, 3,  '2022-04-01'),
(14, 3,  '2022-06-01'),
(6, 4, '2022-02-16'),
(16, 4,  '2022-02-23'),
(16, 4,  '2022-03-02'),
(26, 4,  '2022-03-16'),
(8, 5,'2022-03-22'),
(18, 5,  '2022-04-01'),
(28, 5,  '2022-04-08'),
(9, 5,  '2022-06-28'),
(19, 5,  '2022-07-12'),
(19, 5,  '2022-07-18'),
(29, 5,  '2022-07-25'),
(8, 5, '2022-09-02'),
(28, 5,  '2022-09-18'),
(10, 1,  '2022-08-20'),
(20, 1,  '2022-09-10'),
(30, 1, '2022-09-20');